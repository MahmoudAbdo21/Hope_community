<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مجتمع الأمل | الواجهة الاحترافية</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css?v=3">
</head>
<body>

    <div id="splash-screen" class="splash-screen">
        <div class="splash-content text-center">
            <img src="img/logo.png" alt="Logo" class="pulse-logo" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3114/3114883.png'">
            <h2 class="mt-4 text-neon fw-bold">مجتمع الأمل</h2>
            <p class="text-white">جاري التجهيز...</p>
            <div class="loader mx-auto mt-3"></div>
        </div>
    </div>

    <nav class="custom-navbar">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="brand-logo">
                <img src="img/logo.png" id="display-logo" alt="Logo" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3114/3114883.png'">
                <span id="display-name">مجتمع الأمل</span>
            </div>
            
            <div class="nav-links d-none d-xl-flex">
                <a class="nav-item active" onclick="switchTab('home')">الرئيسية</a>
                <a class="nav-item" onclick="switchTab('news')">الأخبار</a>
                <a class="nav-item" onclick="switchTab('signs')">الإشارات</a>
                <a class="nav-item" onclick="switchTab('books')">المكتبة</a>
                <a class="nav-item" onclick="switchTab('schools')">المدارس</a>
                <a class="nav-item text-warning" onclick="switchTab('chat')"><i class="fa-solid fa-microphone"></i> تواصل</a>
                <a class="nav-link admin-only text-danger" onclick="switchTab('settings')" style="display: none;"><i class="fa-solid fa-gear"></i></a>
            </div>

            <div class="nav-buttons">
                <button class="btn-ghost secret-admin-trigger me-2" onclick="promptAdminPin()" title="الإدارة (دخول/خروج)"><i class="fa-solid fa-lock" id="admin-lock-icon" style="color: #777E90;"></i></button>
                <button class="btn-menu d-xl-none" onclick="toggleMenu()"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
    </nav>

    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <nav class="mobile-sidebar" id="sidebar">
        <div class="close-btn" onclick="toggleMenu()"><i class="fa-solid fa-xmark"></i></div>
        <a class="nav-item-mobile active" onclick="switchTab('home')"><i class="fa-solid fa-house"></i> الرئيسية</a>
        <a class="nav-item-mobile" onclick="switchTab('news')"><i class="fa-regular fa-newspaper"></i> الأخبار</a>
        <a class="nav-item-mobile" onclick="switchTab('signs')"><i class="fa-solid fa-hand-sparkles"></i> الإشارات</a>
        <a class="nav-item-mobile" onclick="switchTab('books')"><i class="fa-solid fa-book-open"></i> المكتبة</a>
        <a class="nav-item-mobile" onclick="switchTab('schools')"><i class="fa-solid fa-school"></i> المدارس</a>
        <a class="nav-item-mobile text-warning" onclick="switchTab('chat')"><i class="fa-solid fa-microphone"></i> تواصل صوتي</a>
        <a class="nav-item-mobile admin-only text-danger" onclick="switchTab('settings')" style="display: none;"><i class="fa-solid fa-gear"></i> الإعدادات</a>
    </nav>

    <div class="container main-container">
        
        <main class="page-content active" id="home-tab">
            <div class="row align-items-center min-vh-75 mt-5">
                <div class="col-md-6 text-right z-index-2">
                    <h2 class="text-warning mb-2">مرحباً،</h2>
                    <h1 class="display-4 fw-bold text-white mb-2">انا محمود عبدالرحمن</h1>
                    <h3 class="text-neon mb-4">تكنولوجيا التعليم - جامعة العاصمة</h3>
                    <p class="fs-5 mb-4" style="max-width: 90%; color: #E2E8F0; line-height: 1.8;">
                        هذه المنصة هي مشروع متكامل يهدف إلى دمج وتسهيل التواصل لذوي الهمم (الصم وضعاف السمع) باستخدام أحدث أدوات التكنولوجيا وتصميم واجهات المستخدم.
                    </p>
                    <div class="social-links mb-5">
                        <a href="https://www.facebook.com/mahmoud.abdalrahaman.hagag/" target="_blank"><i class="fa-brands fa-facebook-f"></i></a>
                        <a href="https://www.linkedin.com/in/mahmoud-hagag-145127346" target="_blank"><i class="fa-brands fa-linkedin-in"></i></a>
                        <a href="https://www.instagram.com/mahmoud_abdelrhman_1" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                    </div>
                    <button class="btn-neon-large" onclick="switchTab('news')">تصفح المنصة <i class="fa-solid fa-arrow-left ms-2"></i></button>
                </div>
                
                <div class="col-md-6 text-center position-relative mt-5 mt-md-0">
                    <div class="hero-image-wrapper">
                        <img src="img/profile.png" alt="محمود" id="home-profile-pic" class="hero-image" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'">
                        <div class="floating-badge badge-1" title="تكنولوجيا التعليم"><i class="fa-solid fa-laptop-code"></i></div>
                        <div class="floating-badge badge-2" title="لغة الإشارة"><i class="fa-solid fa-hands-asl-interpreting"></i></div>
                        <div class="floating-badge badge-3" title="دعم ذوي الهمم"><i class="fa-solid fa-universal-access"></i></div>
                    </div>
                </div>
            </div>
        </main>

        <main class="page-content" id="news-tab">
            <div class="row justify-content-center mt-4">
                <div class="col-lg-8">
                    
                    <div class="card-dark admin-only mb-4" style="display: none;">
    <h5 class="text-neon mb-3"><i class="fa-solid fa-pen-nib"></i> إضافة خبر جديد</h5>
    <input type="text" id="news-title" class="input-dark mb-2" placeholder="عنوان الخبر (إجباري)...">
    <textarea id="news-text" class="input-dark mb-2" rows="3" placeholder="اكتب تفاصيل الخبر هنا..."></textarea>
    <div class="d-flex gap-2 mt-2 mb-2">
        <select id="news-media-type" class="input-dark w-25 mb-0" style="padding: 10px;">
            <option value="youtube">يوتيوب</option>
            <option value="drive">جوجل درايف</option>
            <option value="image_link">صورة برابط</option>
            <option value="link">رابط عادي</option>
        </select>
        <input type="text" id="news-media-url" class="input-dark w-50 mb-0" placeholder="ضع الرابط هنا...">
        <label class="btn-outline w-25 text-center mb-0" style="padding: 10px; cursor:pointer;"><i class="fa-solid fa-upload"></i> رفع صورة <input type="file" id="news-image" style="display: none;" onchange="previewNewsImage(event)"></label>
    </div>
    <img id="news-preview" class="media-preview" style="display: none;">
    <button class="btn-neon w-100 mt-3" onclick="addNews()">نشر الخبر</button>
</div>


                    <div id="news-feed"></div>
                    
                </div>
            </div>
        </main>

        <main class="page-content" id="signs-tab">
            <div id="signs-categories-view">
                <div class="card-dark admin-only mb-4" style="display: none;">
                    <h5 class="text-neon">إضافة قسم إشارات جديد</h5>
                    <div class="d-flex gap-2">
                        <input type="text" id="new-sign-cat-name" class="input-dark mb-0" placeholder="اسم القسم (مثال: الأرقام)...">
                        <button class="btn-neon" onclick="addCategory('signs')"><i class="fa-solid fa-plus"></i> إضافة</button>
                    </div>
                </div>
                <div class="category-grid" id="signs-categories-grid"></div>
            </div>

            <div id="signs-items-view" style="display: none;">
                <button class="btn-outline mb-3" onclick="goBackToCategories('signs')"><i class="fa-solid fa-arrow-right"></i> رجوع للأقسام</button>
                <h3 id="current-sign-cat-title" class="mb-4 text-neon"></h3>
                
                <div class="card-dark admin-only mb-4" style="display: none;">
    <h4 class="text-neon mb-3"><i class="fa-solid fa-plus"></i> إضافة إشارة جديدة</h4>
    <input type="text" id="sign-title" class="input-dark" placeholder="اسم الإشارة...">
    <textarea id="sign-desc" class="input-dark" rows="3" placeholder="شرح الإشارة..."></textarea>
    <div class="d-flex gap-2 mt-2 mb-2">
        <select id="sign-media-type" class="input-dark w-25 mb-0" style="padding: 10px;">
            <option value="youtube">يوتيوب</option>
            <option value="drive">جوجل درايف</option>
            <option value="image_link">صورة برابط</option>
            <option value="link">رابط عادي</option>
        </select>
        <input type="text" id="sign-media-url" class="input-dark w-50 mb-0" placeholder="ضع الرابط هنا...">
        <label class="btn-outline w-25 text-center mb-0" style="padding: 10px; cursor:pointer;"><i class="fa-solid fa-upload"></i> رفع صورة <input type="file" id="sign-img" style="display: none;"></label>
    </div>
    <button class="btn-neon w-100 mt-3" onclick="addItem('signs')">حفظ الإشارة</button>
</div>

                <div id="signs-items-list" class="row"></div>
            </div>
        </main>

        <main class="page-content" id="books-tab">
            <div id="books-categories-view">
                <div class="card-dark admin-only mb-4" style="display: none;">
                    <h5 class="text-neon">إضافة تصنيف كتب جديد</h5>
                    <div class="d-flex gap-2">
                        <input type="text" id="new-book-cat-name" class="input-dark mb-0" placeholder="اسم التصنيف (مثال: قواميس)...">
                        <button class="btn-neon" onclick="addCategory('books')"><i class="fa-solid fa-plus"></i> إضافة</button>
                    </div>
                </div>
                <div class="category-grid" id="books-categories-grid"></div>
            </div>

            <div id="books-items-view" style="display: none;">
                <button class="btn-outline mb-3" onclick="goBackToCategories('books')"><i class="fa-solid fa-arrow-right"></i> رجوع للتصنيفات</button>
                <h3 id="current-book-cat-title" class="mb-4 text-neon"></h3>
                
                <div class="card-dark admin-only mb-4" style="display: none;">
    <h4 class="text-warning mb-3"><i class="fa-solid fa-plus"></i> إضافة كتاب / ملف</h4>
    <input type="text" id="book-title" class="input-dark" placeholder="اسم الكتاب...">
    <textarea id="book-desc" class="input-dark" rows="3" placeholder="وصف الكتاب..."></textarea>
    <div class="d-flex gap-2 mt-2 mb-2">
        <select id="book-media-type" class="input-dark w-25 mb-0" style="padding: 10px;">
            <option value="drive">جوجل درايف (PDF/فيديو)</option>
            <option value="youtube">يوتيوب</option>
            <option value="image_link">صورة غلاف برابط</option>
            <option value="link">رابط تحميل عادي</option>
        </select>
        <input type="text" id="book-media-url" class="input-dark w-50 mb-0" placeholder="ضع الرابط هنا...">
        <label class="btn-outline w-25 text-center mb-0" style="padding: 10px; cursor:pointer;"><i class="fa-solid fa-upload"></i> رفع غلاف <input type="file" id="book-img" style="display: none;"></label>
    </div>
    <button class="btn-warning w-100 mt-3 text-dark fw-bold" onclick="addItem('books')">إضافة الكتاب</button>
</div>

                <div id="books-items-list" class="row"></div>
            </div>
        </main>

        <main class="page-content" id="schools-tab">
            <div class="row justify-content-center mt-4">
                <div class="col-lg-8">
                    <h2 class="text-neon mb-4 text-center"><i class="fa-solid fa-school"></i> دليل المدارس</h2>
                    
                    <div class="card-dark admin-only mb-4" style="display: none;">
    <h3 class="text-neon mb-3"><i class="fa-solid fa-school"></i> إضافة مدرسة جديدة</h3>
    <input type="text" id="school-name" class="input-dark" placeholder="اسم المدرسة...">
    <input type="text" id="school-location" class="input-dark" placeholder="رابط خرائط جوجل (اختياري)...">
    <textarea id="school-info" class="input-dark" rows="3" placeholder="معلومات وشروط التقديم..."></textarea>
    <div class="d-flex gap-2 mt-2 mb-2">
        <select id="school-media-type" class="input-dark w-25 mb-0" style="padding: 10px;">
            <option value="youtube">فيديو تعريفي (يوتيوب)</option>
            <option value="image_link">صورة خارجية (برابط)</option>
            <option value="drive">مرفق من درايف</option>
        </select>
        <input type="text" id="school-media-url" class="input-dark w-50 mb-0" placeholder="ضع الرابط هنا...">
        <label class="btn-outline w-25 text-center mb-0" style="padding: 10px; cursor:pointer;"><i class="fa-solid fa-upload"></i> رفع صورة <input type="file" id="school-img" style="display: none;" onchange="previewSchoolImage(event)"></label>
    </div>
    <img id="school-preview" class="media-preview" style="display: none;">
    <button class="btn-neon w-100 mt-3" onclick="addSchool()">إضافة المدرسة</button>
</div>

                    <div id="schools-list"></div>
                </div>
            </div>
        </main>

<main class="page-content" id="chat-tab">
            <div class="row justify-content-center mt-4">
                <div class="col-lg-10 text-center">
                    <h2 class="text-warning mb-3"><i class="fa-solid fa-language"></i> المترجم الصوتي الفوري</h2>
                    <p class="text-light fs-5 mb-4">تواصل بحرية مع أي شخص في العالم. ستقوم الأداة بالترجمة الفورية بينك وبين الطرف الآخر.</p>
                    
                    <div class="card-dark mb-4 text-center" style="border: 1px solid var(--neon);">
                        <div class="row">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label class="text-neon fw-bold mb-2"><i class="fa-solid fa-user"></i> لغتي المريحة (أقرأ وأكتب بها):</label>
                                <select id="my-lang" class="input-dark mb-0">
                                    <option value="ar-EG">العربية</option>
                                    <option value="en-US">English (الإنجليزية)</option>
                                    <option value="fr-FR">Français (الفرنسية)</option>
                                    <option value="de-DE">Deutsch (الألمانية)</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="text-warning fw-bold mb-2"><i class="fa-solid fa-globe"></i> لغة الطرف الآخر (يتحدث ويستمع بها):</label>
                                <select id="other-lang" class="input-dark mb-0">
                                    <option value="en-US">English (الإنجليزية)</option>
                                    <option value="ar-EG">العربية</option>
                                    <option value="fr-FR">Français (الفرنسية)</option>
                                    <option value="de-DE">Deutsch (الألمانية)</option>
                                    <option value="it-IT">Italiano (الإيطالية)</option>
                                    <option value="es-ES">Español (الإسبانية)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-6 mb-4">
                            <div class="card-dark h-100">
                                <h4 class="text-neon mb-3"><i class="fa-solid fa-ear-listen"></i> استماع للطرف الآخر</h4>
                                <p class="text-muted" style="font-size: 14px;">اضغط هنا واجعل الشخص الآخر يتحدث، وسنترجم كلامه لتتمكن من قراءته بلغتك.</p>
                                <button id="btn-record" class="btn-neon-large w-100 mb-3" onclick="startRecording()">
                                    <i class="fa-solid fa-microphone"></i> استماع وترجمة
                                </button>
                                <textarea id="stt-result" class="input-dark mb-0" rows="4" placeholder="سيظهر كلامه مترجماً هنا لتتمكن من قراءته..." readonly></textarea>
                            </div>
                        </div>

                        <div class="col-md-6 mb-4">
                            <div class="card-dark h-100">
                                <h4 class="text-warning mb-3"><i class="fa-solid fa-keyboard"></i> التحدث للطرف الآخر</h4>
                                <p class="text-muted" style="font-size: 14px;">اكتب رسالتك بلغتك، وسنقوم بترجمتها ونطقها بصوت مسموع ليفهمها الطرف الآخر.</p>
                                <textarea id="tts-input" class="input-dark" rows="3" placeholder="اكتب رسالتك هنا..."></textarea>
                                <button id="btn-speak" class="w-100 p-3 fw-bold rounded-3 border-0" style="background: #f39c12; color:#141416; font-size: 18px; cursor: pointer; transition: 0.3s;" onclick="speakText()">
                                    <i class="fa-solid fa-volume-high"></i> نطق الرسالة للطرف الآخر
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <main class="page-content" id="chat-tab">
            <div class="row justify-content-center mt-4">
                <div class="col-lg-10 text-center">
                    <h2 class="text-warning mb-3"><i class="fa-solid fa-language"></i> المترجم الصوتي الفوري</h2>
                    <p class="text-light fs-5 mb-4">تواصل بحرية مع أي شخص في العالم. ستقوم الأداة بالترجمة الفورية بينك وبين الطرف الآخر.</p>
                    
                    <div class="card-dark mb-4 text-center" style="border: 1px solid var(--neon);">
                        <div class="row">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <label class="text-neon fw-bold mb-2"><i class="fa-solid fa-user"></i> لغتي المريحة (أقرأ وأكتب بها):</label>
                                <select id="my-lang" class="input-dark mb-0">
                                    <option value="ar-EG">العربية (مصر)</option>
                                    <option value="ar-SA">العربية (السعودية)</option>
                                    <option value="en-US">English (الإنجليزية)</option>
                                    <option value="fr-FR">Français (الفرنسية)</option>
                                    <option value="de-DE">Deutsch (الألمانية)</option>
                                    <option value="es-ES">Español (الإسبانية)</option>
                                    <option value="it-IT">Italiano (الإيطالية)</option>
                                    <option value="ru-RU">Русский (الروسية)</option>
                                    <option value="tr-TR">Türkçe (التركية)</option>
                                    <option value="zh-CN">中文 (الصينية)</option>
                                    <option value="ja-JP">日本語 (اليابانية)</option>
                                    <option value="ko-KR">한국어 (الكورية)</option>
                                    <option value="hi-IN">हिन्दी (الهندية)</option>
                                    <option value="ur-PK">اردو (الأردية)</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="text-warning fw-bold mb-2"><i class="fa-solid fa-globe"></i> لغة الطرف الآخر (يتحدث ويستمع بها):</label>
                                <select id="other-lang" class="input-dark mb-0">
                                    <option value="en-US">English (الإنجليزية)</option>
                                    <option value="ar-EG">العربية (مصر)</option>
                                    <option value="ar-SA">العربية (السعودية)</option>
                                    <option value="fr-FR">Français (الفرنسية)</option>
                                    <option value="de-DE">Deutsch (الألمانية)</option>
                                    <option value="es-ES">Español (الإسبانية)</option>
                                    <option value="it-IT">Italiano (الإيطالية)</option>
                                    <option value="ru-RU">Русский (الروسية)</option>
                                    <option value="tr-TR">Türkçe (التركية)</option>
                                    <option value="zh-CN">中文 (الصينية)</option>
                                    <option value="ja-JP">日本語 (اليابانية)</option>
                                    <option value="ko-KR">한국어 (الكورية)</option>
                                    <option value="hi-IN">हिन्दी (الهندية)</option>
                                    <option value="ur-PK">اردو (الأردية)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-6 mb-4">
                            <div class="card-dark h-100">
                                <h4 class="text-neon mb-3"><i class="fa-solid fa-ear-listen"></i> استماع للطرف الآخر</h4>
                                <p class="text-muted" style="font-size: 14px;">اضغط هنا واجعل الشخص الآخر يتحدث، وسنترجم كلامه لتتمكن من قراءته بلغتك.</p>
                                <button id="btn-record" class="btn-neon-large w-100 mb-3" onclick="startRecording()">
                                    <i class="fa-solid fa-microphone"></i> استماع وترجمة
                                </button>
                                <textarea id="stt-result" class="input-dark mb-0" rows="4" placeholder="سيظهر كلامه مترجماً هنا لتتمكن من قراءته..." readonly></textarea>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="card-dark h-100">
                                <h4 class="text-warning mb-3"><i class="fa-solid fa-keyboard"></i> التحدث للطرف الآخر</h4>
                                <p class="text-muted" style="font-size: 14px;">اكتب رسالتك بلغتك، وسنقوم بترجمتها ونطقها بصوت مسموع ليفهمها الطرف الآخر.</p>
                                <textarea id="tts-input" class="input-dark" rows="3" placeholder="اكتب رسالتك هنا..."></textarea>
                                <button id="btn-speak" class="w-100 p-3 fw-bold rounded-3 border-0" style="background: #f39c12; color:#141416; font-size: 18px; cursor: pointer; transition: 0.3s;" onclick="speakText()">
                                    <i class="fa-solid fa-volume-high"></i> نطق الرسالة للطرف الآخر
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <main class="page-content" id="settings-tab">
            <div class="card-dark mt-4">
                <h4 class="text-neon mb-4"><i class="fa-solid fa-sliders"></i> لوحة الإعدادات</h4>
                
                <label class="text-white mb-2">تغيير اللوجو والاسم:</label>
                <input type="text" id="setting-name" class="input-dark" placeholder="اسم الموقع">
                <label class="btn-outline w-100 text-center mb-3">رفع لوجو جديد <input type="file" accept="image/*" style="display: none;" onchange="previewLogoFile(event)"></label>
                <button class="btn-neon w-100 mb-4" onclick="saveSiteSettings()">حفظ الهوية</button>
                
                <hr class="border-secondary mb-4">
                
                <label class="text-white mb-2">تغيير صورتك الشخصية:</label>
                <label class="btn-outline w-100 text-center mb-4">اختر صورتك <input type="file" accept="image/*" style="display: none;" onchange="updateProfilePic(event)"></label>

                <div class="data-management p-4 rounded-4 mt-4" style="background: rgba(255,255,255,0.05); border: 1px solid #333;">
                    <h5 class="text-warning"><i class="fa-solid fa-database"></i> إدارة البيانات والنسخ الاحتياطي</h5>
                    <p class="text-muted" style="font-size: 14px;">احفظ بيانات الموقع في ملف لتتمكن من استرجاعها في أي وقت.</p>
                    <button class="btn btn-outline-success w-100 mb-3 mt-2" onclick="exportData()"><i class="fa-solid fa-download"></i> تصدير البيانات (تحميل ملف)</button>
                    <label class="btn btn-outline-info w-100 text-center mb-4" style="cursor: pointer;"><i class="fa-solid fa-file-import"></i> استيراد بيانات (رفع ملف) <input type="file" accept=".json" style="display: none;" onchange="importData(event)"></label>
                    
                    <hr class="border-secondary mb-3">
                    <p class="text-neon" style="font-size: 14px;"><i class="fa-brands fa-github"></i> <strong>للمطورين فقط:</strong> استخراج كود البيانات لرفعه على GitHub ليعمل كبيانات افتراضية.</p>
                    <button class="btn btn-outline-warning w-100 fw-bold" onclick="generateGithubCode()"><i class="fa-solid fa-code"></i> استخراج كود (data.js)</button>
                </div>
            </div>
        </main>

    </div>

    <script src="data.js"></script>
    <script src="main.js?v=3"></script>
</body>
</html>